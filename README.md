# VS Code / Cursor Settings Sync

This repository helps you maintain and sync your VS Code and Cursor editor settings across different macOS machines. It provides scripts to sync settings between the two editors and to/from GitHub.

## Repository Structure

- `settings.json` - Editor settings
- `keybindings.json` - Keyboard shortcuts
- `launch.json` - Debug configurations
- `snippets/` - Directory containing code snippets
- Various sync scripts (see below)

## Sync Scripts

### Push to GitHub
- `push-from-code.sh` - Push VS Code settings to GitHub
- `push-from-cursor.sh` - Push Cursor settings to GitHub

### Pull from GitHub
- `sync-from-code.sh` - Pull settings from GitHub to VS Code
- `sync-from-cursor.sh` - Pull settings from GitHub to Cursor

### Sync Between Editors
- `code-to-cursor.sh` - Copy VS Code settings to Cursor
- `cursor-to-code.sh` - Copy Cursor settings to VS Code

## Recommended Aliases

Add these to your `.aliases` file for easy access:

```bash
# Navigation
alias vscode='cd ~/code/vscode'

# Push to GitHub
alias vspush='cd ~/code/vscode && ./push-from-code.sh'
alias curpush='cd ~/code/vscode && ./push-from-cursor.sh'

# Pull from GitHub
alias vspull='cd ~/code/vscode && ./sync-from-code.sh'
alias curpull='cd ~/code/vscode && ./sync-from-cursor.sh'

# Sync between editors
alias vstocur='cd ~/code/vscode && ./code-to-cursor.sh'
alias curtovs='cd ~/code/vscode && ./cursor-to-code.sh'
```

## Usage Examples

1. Push your current VS Code settings to GitHub:
   ```bash
   vspush
   ```

2. Pull the latest settings from GitHub to Cursor:
   ```bash
   curpull
   ```

3. Copy your Cursor settings to VS Code:
   ```bash
   curtovs
   ```

## Ensure VS Code R Extension Attaches To Workspace

The REditorSupport `R` extension will attempt to attach itself to the workspace upon opening an R terminal, but this often fails due to a race condition. 

The R extensions work by creating the file `~/.vscode-R/init.R`, which sources a separate file. For example, on the latest build of the extension, when installed from Cursor, the extensions creates and sources this file: `~/.cursor/extensions/reditorsupport.r-2.8.5/R/session/init.R`

To fix this, find the `init.R` sourced in `~/.vscode-R/init.R`, and add the following to it:

```r
if (requireNamespace("later", quietly = TRUE)) {
  message("Configuring VS Code environment inspection...")
  later::later(function() {
    if (exists(".vsc.attach", mode = "function")) {
      .vsc.attach()
    } else {
      message("❌ .vsc.attach() still not available after delay\n")
    }
  }, delay = 0.5)
} else {
  message("⚠️ 'later' package not available; skipping deferred .vsc.attach()\n")
}
```

Two notes:

* The extension will often overwrite `~/.vscode-R/init.R` so do not edit this file directly.
* This workaround depends on the `later` R package to handle the race condition.

It's also fine to just run `.vsc.attach()` in an R session when you need the Workspace niceties.

## Requirements

- macOS (scripts use macOS-specific paths)
- Git
- VS Code and/or Cursor installed

## Note

After syncing settings, you may need to restart the respective editor for changes to take effect. 